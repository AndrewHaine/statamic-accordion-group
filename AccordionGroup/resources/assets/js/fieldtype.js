!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i(i.s=0)}([function(e,t,i){e.exports=i(1)},function(e,t,i){Vue.component("accordion_group-fieldtype",i(2))},function(e,t,i){"use strict";i.r(t);function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fieldset=t,this.name=t.name,this.sections=this.parseSections(t.sections),this.metaFields=[]}var t,i,s;return t=e,(i=[{key:"parseSections",value:function(e){var t=this;return _.chain(e).mapObject(function(e,i){return e.handle=i,e.fields=t.parseFields(e.fields),e}).values().value()}},{key:"parseFields",value:function(e){return _.chain(e).mapObject(function(e,t){return e.name=t,e}).values().value()}},{key:"showSlug",value:function(e){return e&&this.metaFields.push("slug"),this}},{key:"showDate",value:function(e){return e&&this.metaFields.push("date"),this}},{key:"prependTitle",value:function(){return this.fieldsInSections().includes("title")||this.firstSectionFields().unshift({name:"title",type:"text",instructions:null,width:100}),this}},{key:"prependMeta",value:function(){var e=this;this.ensureSidebar();var t=this.fieldsInSections();return _.each(this.metaFields,function(i){t.includes(i)||e.pushSidebarField({name:i,type:i})}),this.removeEmptySidebar(),this}},{key:"pushSidebarField",value:function(e){var t=this.sidebarSectionFields(),i=Object.assign({isMeta:!0,width:100,localizable:!0},e||{});t.unshift(i)}},{key:"ensureSidebar",value:function(){_.find(this.sections,{handle:"sidebar"})||this.sections.push({handle:"sidebar",display:translate("cp.meta"),fields:[]})}},{key:"removeEmptySidebar",value:function(){this.sidebarSectionFields().length>0||(this.sections=_.reject(this.sections,function(e){return"sidebar"==e.handle}))}},{key:"fieldsInSections",value:function(){return _.chain(this.sections).map(function(e){return e.fields}).flatten().pluck("name").value()}},{key:"firstSectionFields",value:function(){return this.sections[0].fields}},{key:"sidebarSectionFields",value:function(){return _.find(this.sections,{handle:"sidebar"}).fields}},{key:"fields",value:function(){return _.chain(this.sections).pluck("fields").flatten().value()}}])&&n(t.prototype,i),s&&n(t,s),e}();var a=function(e,t,i,n,s,a,r,l){var o,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=i,c._compiled=!0),n&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),r?(o=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},c._ssrRegister=o):s&&(o=l?function(){s.call(this,this.$root.$options.shadowRoot)}:s),o)if(c.functional){c._injectStyles=o;var d=c.render;c.render=function(e,t){return o.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,o):[o]}return{exports:e,options:c}}({mixins:[Fieldtype],props:["data","config","name"],created:function(){var e=this;this.$http.get(cp_url("fieldsets-json/".concat(this.config.child_fieldset))).success(function(t){var i=new s(t);e.child_fields=i.fields(),e.loading=!1,e.bindChangeWatcher()})},data:function(){return{autoBindChangeWatcher:!1,child_fields:[],isOpen:!1,loading:!0}},methods:{handleClick:function(e){this.loading||(this.isOpen=!this.isOpen)},componentName:function(e){return e.replace(".","-")+"-fieldtype"},fieldClasses:function(e){return["form-group","px-3 py-2",e.type+"-fieldtype",tailwind_width_class(e.width),e.classes||""]}}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"accordion-field",class:{"accordion-field--open":e.isOpen}},[i("div",{staticClass:"accordion-field__header no-select clickable",on:{click:e.handleClick}},[e.config.child_fieldset?i("div",[e.loading?i("div",{staticClass:"loading loading-basic"},[i("span",{staticClass:"icon icon-circular-graph animation-spin"}),e._v("\n        "+e._s(e.translate("cp.loading"))+"\n      ")]):i("div",[i("span",{staticClass:"accordion-field__title"},[e._v(e._s(e.config.display))]),e._v(" "),e.config.instructions?i("small",{staticClass:"accordion-field__instruct",domProps:{innerHTML:e._s(e.config.instructions|e.markdown)}}):e._e()])]):i("div",[e._m(0)])]),e._v(" "),i("div",{staticClass:"accordion-field__body",class:{invisible:!e.isOpen}},[e.child_fields.length?i("div",{staticClass:"accordion-field__fieldset publish-fields"},e._l(e.child_fields,function(t){return i("div",{key:t.name,class:e.fieldClasses(t)},[i("div",{staticClass:"field-inner"},[e.isReadOnly?i("div",{staticClass:"read-only-overlay",attrs:{title:e.translate("cp.read_only")}}):e._e(),e._v(" "),i("label",{staticClass:"block",class:{bold:t.bold}},[t.display?[e._v(e._s(t.display))]:e._e(),e._v(" "),t.display?e._e():[e._v(e._s(e._f("titleize")(e._f("deslugify")(t.name))))],e._v(" "),t.required?i("i",{staticClass:"required"},[e._v("*")]):e._e()],2),e._v(" "),t.instructions?i("small",{staticClass:"help-block",domProps:{innerHTML:e._s(t.instructions|e.markdown)}}):e._e(),e._v(" "),i(e.componentName(t.type),{tag:"component",attrs:{name:e.name+"."+t.name,config:t,data:e.data[t.name]},on:{"update:data":function(i){return e.$set(e.data,t.name,i)}}})],1)])}),0):e._e()])])},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"loading loading-basic red"},[t("span",{staticClass:"icon icon-block"}),this._v(" No fieldset has been set for this group.\n      ")])}],!1,null,null,null);t.default=a.exports}]);